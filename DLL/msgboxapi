--{ feito por: Emanuel Franklyn. }--
--{      data: 03/11/2018        }--
--{ idioma: portugues brasileiro }--

--{infomessagebox: gera uma caixa de dialogo com uma mensagem e um botao que quando pressionado faz o aplicativo voltar a seu funcionamento normal}--
--{erromessagebox: gera uma caixa de dialogo com uma mensagem e dois botoes o primeiro(esquerda,bt1) retorna a executar o aplicativo normalmente ja o segundo botao(direita,bt2) quando apertado reinicia o computador}--

local function variaveis(pix,piy,pfy)
	pfy = pfy-1
	if pix == 0 or pix == nil then
		pix = 1
	end
	if piy == 0 or piy == nil then
		piy = 1
	end
	if pfy <3 or pfy == nil then
		pfy = 5
	end
	x = pix
	y = piy
	x1 = pfy+x+18+2
	y1 = pfy+y+2
	x2 = pix+1
	y2 = piy+1
	x3 = pfy+x+18+1
	y3 = pfy+y+1
end

local function buttons(pix,piy,pfy,btga,texto1,texto2,texto3)
	variaveis(pix,piy,pfy)
	paintutils.drawBox(x3+1,y,x3+1,y,colors.red)
	term.setCursorPos(x3+1,y)
	term.write("X")
	btg = btga or 0
	if btg == 0 then
		while true do
			a, b, c, d = os.pullEvent("mouse_click")
			if b == 1 then
				if c == x3+1 then
					if d == y then
						term.setBackgroundColor(colors.black)
						term.setTextColor(colors.white)
						term.clear()
						term.setCursorPos(1,1)
						return
					end
				end
			end
		end
	elseif btg == 1 then
		paintutils.drawBox(x1-string.len(texto1),y1-1,x1-1,y1-1,colors.white)
		term.setTextColor(colors.black)
		term.setCursorPos(x1-string.len(texto1),y1-1)
		term.write(texto1)
		while true do
			a, b, c, d = os.pullEvent("mouse_click")
			if b == 1 then
				if c == x3+1 then
					if d == y then
						term.setBackgroundColor(colors.black)
						term.setTextColor(colors.white)
						term.clear()
						term.setCursorPos(1,1)
						return
					end
				end
				for i=1,string.len(texto1) do
					if c == x1-string.len(texto1)+i-1 then
						if d == y1-1 then
							term.setBackgroundColor(colors.black)
							term.setTextColor(colors.white)
							term.clear()
							term.setCursorPos(1,1)
							return
						end
					end
				end
			end
		end
	elseif btg == 2 then 
		paintutils.drawBox(x1-string.len(texto2),y1-1,x1-1,y1-1,colors.white)
		term.setTextColor(colors.black)
		term.setCursorPos(x1-string.len(texto2),y1-1)
		term.write(texto2)
		paintutils.drawBox(x1-string.len(texto1)-1-string.len(texto2),y1-1,x1-2-string.len(texto2),y1-1,colors.white)
		term.setTextColor(colors.black)
		term.setCursorPos(x1-string.len(texto1)-1-string.len(texto2),y1-1)
		term.write(texto1)
		while true do
			a, b, c, d = os.pullEvent("mouse_click")
			if b == 1 then
				if c == x3+1 then
					if d == y then
						term.setBackgroundColor(colors.black)
						term.setTextColor(colors.white)
						term.clear()
						term.setCursorPos(1,1)
						return
					end
				end
				for i=1,string.len(texto1) do
					if c == x1-string.len(texto1)+i-2-string.len(texto2) then
						if d == y1-1 then
							return
						end
					end
				end
				for i=1,string.len(texto2) do
					if c == x1-string.len(texto2)+i-1 then
						if d == y1-1 then
							os.reboot()
						end
					end
				end
			end
		end
	end
end

local function messagebox(pix,piy,pfy,cor1,cor2)
	cor1 = cor1 or colors.lightBlue
	cor2 = cor2 or colors.gray
	variaveis(pix,piy,pfy)
	term.setTextColor(colors.white)
	paintutils.drawBox(x,y,x1,y1,cor1)
	paintutils.drawFilledBox(x2,y2,x3,y3,cor2)
	paintutils.drawBox(1,1,1,1,cor1)
	term.setTextColor(colors.white)
	for i=x+1,x1-1 do
		term.setCursorPos(i,y)
		term.write("=")
		term.setCursorPos(i,y1)
		term.write("=")
	end
	term.setCursorPos(x,y)
	term.write("#")
	term.setCursorPos(x1,y)
	term.write("#")
	term.setCursorPos(x,y1)
	term.write("#")
	term.setCursorPos(x1,y1)
	term.write("#")
	for i=y+1,y1-1 do
		term.setCursorPos(x,i)
		term.write("|")
		term.setCursorPos(x1,i)
		term.write("|")
	end
end

function infomessagebox(pix,piy,pfy,nome,texto,cor1,cor2,bt)
	cor1 = cor1 or colors.lightBlue
	cor2 = cor2 or colors.gray
	variaveis(pix,piy,pfy)
	messagebox(pix,piy,pfy,cor1,cor2)
	paintutils.drawBox(0,0,0,0,cor1)
	term.setCursorPos(x+1,y)
	term.write(nome)
	paintutils.drawBox(0,0,0,0,cor2)
	term.setCursorPos(x+1,y+1)
	term.write(texto)
	buttons(pix,piy,pfy,1,bt)
end

function erromessagebox(pix,piy,pfy,nome,texto,cor1,cor2,bt1,bt2)
	cor1 = cor1 or colors.lightBlue
	cor2 = cor2 or colors.gray
	variaveis(pix,piy,pfy)
	messagebox(pix,piy,pfy,cor1,cor2)
	paintutils.drawBox(0,0,0,0,cor1)
	term.setCursorPos(x+1,y)
	term.write(nome)
	paintutils.drawBox(0,0,0,0,cor2)
	term.setCursorPos(x+1,y+1)
	term.write(texto)
	buttons(pix,piy,pfy,2,bt1,bt2)
end
